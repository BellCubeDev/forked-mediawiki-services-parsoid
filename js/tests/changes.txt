# MediaWiki Parsoid selective serializer changes for testing
# Based on the parserTests.txt file of MediaWiki tests.

###
### Basic tests
###

!! test
Simple paragraph
!! options
changes={"0":{"content":"This is a complex paragraph."}}
!! result
This is a complex paragraph.
!! end

!! test
Paragraphs with extra newline spacing
!! options
changes={"0":{"content":"foo baz"},"2":{"add":{"type": "annotation", "tagName":"b","content":"bar"}}}
!! result
foo baz

bar'''bar'''


baz



booz
!! end

!! test
Simple list
!! options
changes={"0":{"add":{"type":"block", "tagName":"li","content":" Item 3"}}}
!! result
* Item 1
* Item 2
* Item 3
!! end

!! test
Italics and bold
!! options
changes={"0":{"children":{"0":{"content":" less than plain"}}}}
!! result
* less than plain
* plain''italic''plain
* plain''italic''plain''italic''plain
* plain'''bold'''plain
* plain'''bold'''plain'''bold'''plain
* plain''italic''plain'''bold'''plain
* plain'''bold'''plain''italic''plain
* plain''italic'''bold-italic'''italic''plain
* plain'''bold''bold-italic''bold'''plain
* plain'''''bold-italic'''italic''plain
* plain'''''bold-italic''bold'''plain
* plain''italic'''bold-italic'''''plain
* plain'''bold''bold-italic'''''plain
* plain l'''italic''plain
* plain l''''bold''' plain
!! end

!! test
nowiki 3
!! options
changes={"2":{"prepend":{"type":"block", "tagName":"li", "content":" Just prepending"}}}
!! result
:There is not nowiki.
:There is <nowiki>nowiki</nowiki>.

# Just prepending
#There is not nowiki.
#There is <nowiki>nowiki</nowiki>.

*There is not nowiki.
*There is <nowiki>nowiki</nowiki>.
!! end

!! test
2b. Pre and tables
!! options
changes={"1":{"children":{"1":{"prepend":{"type":"block","tagName":"tr","content":"<td>This is a new row</td>"}}}}}
!! result
  {|
 |-
|This is a new row
|-
|foo
|}
!! end

!! test
HTML bullet list, closed tags (bug 5497)
!! options
changes={"0":{"prepend":{"type":"block", "tagName":"li","content":"Prependez-vous!"}}}
!! result
<ul>
<li>Prependez-vous!</li>
<li>One</li>
<li>Two</li>
</ul>
!! end

